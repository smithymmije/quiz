<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz VixGelados</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #0A0F19;
        color: white;
        text-align: center;
        padding: 20px;
        margin: 0;
    }

    h1 {
        color: #FFD700;
        font-size: 2rem;
        margin-bottom: 20px;
    }

    .btn {
        background-color: #1E90FF;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 10px 5px;
        cursor: pointer;
        font-size: 1rem;
        border-radius: 8px;
        display: inline-block;
        transition: background-color 0.3s;
        width: auto;
        max-width: 90%;
    }

    .btn:hover {
        background-color: #4682B4;
    }

    .option {
        background-color: #222;
        border: 2px solid #444;
        padding: 12px;
        margin: 10px auto;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s, transform 0.2s;
        max-width: 600px;
        font-size: 1rem;
    }

    .option:hover {
        background-color: #333;
    }

    .correct {
        background-color: #28a745 !important;
        border-color: #28a745 !important;
        color: white;
        animation: pulse-correct 0.5s ease;
    }

    .wrong {
        background-color: #dc3545 !important;
        border-color: #dc3545 !important;
        color: white;
        animation: shake-wrong 0.5s ease;
    }

    @keyframes pulse-correct {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    @keyframes shake-wrong {
        0% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        50% { transform: translateX(5px); }
        75% { transform: translateX(-5px); }
        100% { transform: translateX(0); }
    }

    .explanation {
        display: block;
        font-size: 0.9rem;
        margin-top: 10px;
        font-style: italic;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    /* üì± Responsividade para telas menores */
    @media (max-width: 600px) {
        h1 {
            font-size: 1.5rem;
        }

        .btn {
            font-size: 0.9rem;
            padding: 8px 16px;
        }

        .option {
            font-size: 0.95rem;
            padding: 10px;
        }

        .explanation {
            font-size: 0.85rem;
        }
    }
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<h1>üéØ Quiz VixGelados</h1>
<p>Escolha o n√≠vel:</p>
<button class="btn" onclick="startQuiz('facil')">F√°cil</button>
<button class="btn" onclick="startQuiz('medio')">M√©dio</button>
<button class="btn" onclick="startQuiz('avancado')">Avan√ßado</button>
<button class="btn" onclick="startQuiz('apresentacao')">Apresenta√ß√£o</button>
<button class="btn" onclick="startQuiz('aleatorio')">Aleat√≥rio</button>

<div id="quiz" style="display:none; margin-top: 20px;">
    <h2 id="question"></h2>
    <div id="options"></div>
    <p id="feedback" style="font-weight:bold; margin-top: 15px;"></p>
    <span id="explanation" class="explanation"></span>
</div>

<div id="result" style="display:none; margin-top: 20px;">
    <h2>üèÜ Resultado</h2>
    <p id="final-message"></p>
    <p id="score" style="font-size: 18px; font-weight: bold;"></p>
    <p id="gabarito" style="white-space: pre-wrap; text-align: left; max-width: 600px; margin: 0 auto;"></p>
    <button class="btn" onclick="location.reload()">Jogar Novamente</button>
    <button class="btn" onclick="voltarInicio()">Voltar ao In√≠cio</button>
    <button class="btn" onclick="baixarRelatorio()">Baixar Relat√≥rio PDF</button>
</div>

<script>
const quizzes = {
    facil: [
        {pergunta: "√Årea total da VixGelados:", opcoes: ["1.000 m¬≤", "2.000 m¬≤", "5.000 m¬≤"], resposta: "b", explicacao: "A VixGelados opera em uma √°rea de 2.000 m¬≤."},
        {pergunta: "N√∫mero de colaboradores:", opcoes: ["25", "50", "100"], resposta: "b", explicacao: "A empresa conta com 50 colaboradores."},
        {pergunta: "Um problema do layout atual √©:", opcoes: ["Pouca ilumina√ß√£o", "Fluxo produtivo ineficiente", "Falta de mat√©ria-prima"], resposta: "b", explicacao: "Um dos maiores desafios era o fluxo produtivo ineficiente."},
        {pergunta: "Tipo de produ√ß√£o predominante:", opcoes: ["Cont√≠nua", "Por bateladas", "Sob encomenda"], resposta: "b", explicacao: "A produ√ß√£o √© por bateladas, ideal para produtos com varia√ß√µes de sabor."},
        {pergunta: "Produ√ß√£o MTS significa:", opcoes: ["Produzir para estoque", "Produzir sob encomenda", "Produzir artesanalmente"], resposta: "a", explicacao: "MTS (Make-to-Stock) significa produzir para manter um estoque."},
        {pergunta: "Produ√ß√£o MTO significa:", opcoes: ["Produzir para estoque", "Produzir sob encomenda", "Produzir por bateladas"], resposta: "b", explicacao: "MTO (Make-to-Order) √© a produ√ß√£o sob encomenda."},
        {pergunta: "Layout escolhido:", opcoes: ["Funcional", "Em linha", "H√≠brido"], resposta: "c", explicacao: "O layout h√≠brido combina a efici√™ncia da linha cont√≠nua com a versatilidade das c√©lulas."},
        {pergunta: "Armazenamento refrigerado fica:", opcoes: ["Ao lado da moldagem", "Pr√≥ximo √† expedi√ß√£o", "Na recep√ß√£o"], resposta: "b", explicacao: "O armazenamento refrigerado fica pr√≥ximo √† expedi√ß√£o para facilitar a log√≠stica de sa√≠da."},
        {pergunta: "O layout em U ajuda a:", opcoes: ["Reduzir dist√¢ncias", "Aumentar dist√¢ncias", "Melhorar decora√ß√£o"], resposta: "a", explicacao: "O layout em U √© conhecido por reduzir dist√¢ncias e facilitar a comunica√ß√£o."},
        {pergunta: "Kanban serve para:", opcoes: ["Regular o fluxo de materiais", "Calcular custos", "Treinar funcion√°rios"], resposta: "a", explicacao: "O Kanban √© uma ferramenta visual que ajuda a regular o fluxo de materiais."},
        {pergunta: "Meta de redu√ß√£o da dist√¢ncia percorrida:", opcoes: ["15%", "25%", "30%"], resposta: "c", explicacao: "Uma das metas do projeto √© reduzir em 30% a dist√¢ncia percorrida."},
        {pergunta: "ROI estimado:", opcoes: ["3 meses", "6 meses", "12 meses"], resposta: "b", explicacao: "O retorno sobre o investimento (ROI) do projeto √© esperado em 6 meses."}
    ],
    medio: [
        {pergunta: "Objetivo do redesenho:", opcoes: ["Melhorar fluxo, ergonomia e integra√ß√£o", "Criar novos sabores", "Aumentar jornada de trabalho"], resposta: "a", explicacao: "O redesenho do layout foca em pontos cruciais: melhoria do fluxo, ergonomia e integra√ß√£o entre setores."},
        {pergunta: "Produ√ß√£o por bateladas significa:", opcoes: ["Produzir v√°rias pequenas quantidades diferentes", "Produzir grandes quantidades iguais antes da troca", "Produzir sob demanda"], resposta: "b", explicacao: "Produ√ß√£o por bateladas √© quando se produz uma grande quantidade de um mesmo produto para s√≥ depois mudar o tipo."},
        {pergunta: "Estrat√©gias produtivas usadas:", opcoes: ["MTS e MTO", "Just-in-time e Kanban", "ETO e Lean"], resposta: "a", explicacao: "A VixGelados utiliza uma combina√ß√£o de MTS (para o padr√£o) e MTO (para personalizados)."},
        {pergunta: "Coexist√™ncia de MTS e MTO exige:", opcoes: ["Layout funcional", "Layout h√≠brido", "Layout em linha"], resposta: "b", explicacao: "A combina√ß√£o de MTS e MTO exige um layout h√≠brido."},
        {pergunta: "Tipo funcional tem como vantagem:", opcoes: ["Alta flexibilidade por processo", "Alta efici√™ncia", "Baixa complexidade gerencial"], resposta: "a", explicacao: "O layout funcional se destaca pela alta flexibilidade."},
        {pergunta: "Tipo em linha tem como desvantagem:", opcoes: ["Alta flexibilidade", "Baixa flexibilidade", "Necessidade de estoque intermedi√°rio"], resposta: "b", explicacao: "A principal desvantagem do layout em linha √© a baixa flexibilidade."},
        {pergunta: "Ordem correta no novo layout:", opcoes: [
            "Recebimento ‚Üí Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Moldagem ‚Üí Congelamento ‚Üí Embalagem",
            "Recebimento ‚Üí Prepara√ß√£o ‚Üí Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Moldagem ‚Üí Congelamento ‚Üí Embalagem",
            "Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Recebimento ‚Üí Moldagem"], resposta: "b", explicacao: "A ordem otimizada √© Recebimento > Prepara√ß√£o > Mistura > Pasteuriza√ß√£o > Moldagem > Congelamento > Embalagem."},
        {pergunta: "C√©lula de personalizados:", opcoes: ["Centro da f√°brica", "Pr√≥xima √† pasteuriza√ß√£o", "Isolada e flex√≠vel"], resposta: "c", explicacao: "A c√©lula de personalizados precisa ser isolada para manter a flexibilidade."},
        {pergunta: "Servicescape emocional inclui:", opcoes: ["Piso antiderrapante", "Cores e m√∫sica", "Sinaliza√ß√£o"], resposta: "b", explicacao: "O servicescape emocional trata de elementos que afetam o humor e as emo√ß√µes, como cores e m√∫sica."},
        {pergunta: "Servicescape fisiol√≥gico inclui:", opcoes: ["Ilumina√ß√£o e ventila√ß√£o", "Cores e m√∫sica", "Mapas e sinaliza√ß√£o"], resposta: "a", explicacao: "O servicescape fisiol√≥gico se refere a fatores que afetam o corpo, como ilumina√ß√£o e ventila√ß√£o."},
        {pergunta: "Servicescape cognitivo inclui:", opcoes: ["Sinaliza√ß√£o e mapa", "Ventila√ß√£o", "M√∫sica"], resposta: "a", explicacao: "O servicescape cognitivo lida com informa√ß√µes e facilita a orienta√ß√£o, como sinaliza√ß√£o e mapas."},
        {pergunta: "Reduzir resist√™ncia √†s mudan√ßas:", opcoes: ["Treinamentos e comit√™", "Aumentar turnos", "Reduzir pausas"], resposta: "a", explicacao: "Treinamentos e a cria√ß√£o de um comit√™ de mudan√ßa s√£o estrat√©gias essenciais para reduzir a resist√™ncia dos colaboradores."},
        {pergunta: "Meta de tempo m√©dio de ciclo:", opcoes: ["Reduzir 10%", "Reduzir 25%", "Reduzir 30%"], resposta: "b", explicacao: "O projeto visa uma redu√ß√£o de 25% no tempo m√©dio do ciclo."},
        {pergunta: "Custo total do projeto:", opcoes: ["R$ 20.000", "R$ 40.000", "R$ 60.000"], resposta: "b", explicacao: "O custo total do projeto de redesenho √© de R$ 40.000."},
        {pergunta: "ROI do projeto:", opcoes: ["3 meses", "6 meses", "12 meses"], resposta: "b", explicacao: "O ROI do projeto √© de 6 meses."}
    ],
    avancado: [
        {pergunta: "√Årea e colaboradores da VixGelados:", opcoes: ["1.000 m¬≤ e 40", "2.000 m¬≤ e 50", "5.000 m¬≤ e 100"], resposta: "b", explicacao: "A VixGelados tem 2.000 m¬≤ de √°rea e 50 colaboradores."},
        {pergunta: "Produ√ß√£o predominante:", opcoes: ["Cont√≠nua", "Por bateladas", "Sob encomenda"], resposta: "b", explicacao: "A produ√ß√£o √© majoritariamente por bateladas, mas com um setor de produ√ß√£o sob encomenda."},
        {pergunta: "MTS significa:", opcoes: ["Produzir para estoque", "Produzir sob encomenda", "Produzir artesanalmente"], resposta: "a", explicacao: "Make-to-Stock significa produzir para formar estoque."},
        {pergunta: "MTO significa:", opcoes: ["Produzir para estoque", "Produzir sob encomenda", "Produzir por bateladas"], resposta: "b", explicacao: "Make-to-Order, a produ√ß√£o sob encomenda, √© a estrat√©gia usada para os pedidos personalizados."},
        {pergunta: "Layout exigido para MTS+MTO:", opcoes: ["Funcional", "H√≠brido", "Celular"], resposta: "b", explicacao: "Um layout h√≠brido √© a melhor solu√ß√£o para combinar a produ√ß√£o em massa com a produ√ß√£o sob encomenda."},
        {pergunta: "Tipo funcional:", opcoes: ["Flex√≠vel, deslocamentos longos", "Alta efici√™ncia", "Volume limitado"], resposta: "a", explicacao: "O layout funcional oferece alta flexibilidade, mas geralmente resulta em deslocamentos mais longos."},
        {pergunta: "Ordem correta:", opcoes: [
            "Recebimento ‚Üí Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Moldagem ‚Üí Congelamento ‚Üí Embalagem",
            "Recebimento ‚Üí Prepara√ß√£o ‚Üí Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Moldagem ‚Üí Congelamento ‚Üí Embalagem",
            "Mistura ‚Üí Recebimento ‚Üí Pasteuriza√ß√£o ‚Üí Embalagem"], resposta: "b", explicacao: "A sequ√™ncia correta do processo produtivo √© crucial para a efici√™ncia, come√ßando no recebimento e terminando na embalagem."},
        {pergunta: "Local da c√©lula de personalizados:", opcoes: ["Ao lado da pasteuriza√ß√£o", "Pr√≥xima √† recep√ß√£o", "Isolada e flex√≠vel"], resposta: "c", explicacao: "A c√©lula de produ√ß√£o para personalizados deve ser isolada do fluxo principal."},
        {pergunta: "Layout em U ajuda a:", opcoes: ["Reduzir dist√¢ncias e supervisionar", "Aumentar dist√¢ncias", "Separar setores"], resposta: "a", explicacao: "O layout em U √© ideal para reduzir a movimenta√ß√£o e facilitar a supervis√£o da equipe."},
        {pergunta: "Kanban regula fluxo entre:", opcoes: ["Mistura e pasteuriza√ß√£o", "Congelamento e embalagem", "Embalagem e armazenamento"], resposta: "c", explicacao: "O Kanban foi implementado entre o congelamento e a embalagem para regular o fluxo de produtos prontos."},
        {pergunta: "Meta KPIs: tempo de ciclo", opcoes: ["25%", "30%", "15%"], resposta: "a", explicacao: "O objetivo √© reduzir em 25% o tempo de ciclo m√©dio."},
        {pergunta: "Meta KPIs: dist√¢ncia percorrida", opcoes: ["25%", "30%", "40%"], resposta: "b", explicacao: "A meta √© diminuir em 30% a dist√¢ncia que os produtos e colaboradores percorrem."},
        {pergunta: "Meta KPIs: entregas no prazo", opcoes: ["90%", "95%", "85%"], resposta: "b", explicacao: "O objetivo √© aumentar a taxa de entregas no prazo para 95%."},
        {pergunta: "Custo total:", opcoes: ["R$ 40.000", "R$ 60.000", "R$ 25.000"], resposta: "a", explicacao: "O custo total do projeto foi de R$ 40.000."},
        {pergunta: "ROI:", opcoes: ["3 meses", "6 meses", "12 meses"], resposta: "b", explicacao: "O retorno sobre o investimento foi estimado em 6 meses."}
    ],
    apresentacao: [
        {pergunta: "Qual √© o principal problema do layout produtivo atual da VixGelados?", opcoes: ["Falta de maquin√°rio moderno", "Fluxo ineficiente e fadiga dos colaboradores", "Alto custo de mat√©ria-prima"], resposta: "b", explicacao: "O relat√≥rio aponta que o layout funcional obsoleto causa fluxo produtivo ineficiente, retrabalhos e fadiga f√≠sica nos colaboradores."},
        {pergunta: "Qual o tipo de produ√ß√£o predominante na VixGelados?", opcoes: ["Produ√ß√£o cont√≠nua", "Produ√ß√£o por bateladas", "Produ√ß√£o sob encomenda (MTO)"], resposta: "b", explicacao: "A empresa utiliza a produ√ß√£o por bateladas, onde grandes lotes de um produto s√£o feitos antes de mudar para outro sabor ou formato."},
        {pergunta: "As duas estrat√©gias produtivas utilizadas na VixGelados s√£o:", opcoes: ["Just-in-time e Kanban", "Make-to-stock (MTS) e Make-to-order (MTO)", "Lean Manufacturing e ETO"], resposta: "b", explicacao: "A VixGelados usa o MTS para produtos padr√£o (produ√ß√£o para estoque) e MTO para sobremesas personalizadas (produ√ß√£o sob encomenda)."},
        {pergunta: "O que torna o layout h√≠brido a melhor escolha para a VixGelados?", opcoes: ["√â o mais barato para implementar", "Combina a efici√™ncia da linha com a flexibilidade de c√©lulas", "√â mais simples de gerenciar"], resposta: "b", explicacao: "O layout h√≠brido √© ideal para a VixGelados porque permite atender simultaneamente a demanda de alto volume (MTS) e de alta variedade (MTO)."},
        {pergunta: "Qual a sequ√™ncia correta da √°rea de produ√ß√£o no novo layout?", opcoes: ["Mistura ‚Üí Pasteuriza√ß√£o ‚Üí Congelamento", "Recebimento ‚Üí Prepara√ß√£o ‚Üí Mistura ‚Üí Pasteuriza√ß√£o", "Embalagem ‚Üí Armazenamento ‚Üí Expedi√ß√£o"], resposta: "b", explicacao: "A sequ√™ncia otimizada de produ√ß√£o no novo layout come√ßa com o recebimento de mat√©ria-prima, seguido pela prepara√ß√£o, mistura e pasteuriza√ß√£o."},
        {pergunta: "Como a proposta de layout em U contribui para a produ√ß√£o?", opcoes: ["Aumenta o espa√ßo de trabalho", "Reduz dist√¢ncias e facilita a supervis√£o", "Cria mais postos de trabalho"], resposta: "b", explicacao: "O layout em U aproxima o in√≠cio e o fim da linha de produ√ß√£o, o que reduz dist√¢ncias de movimenta√ß√£o e facilita a supervis√£o do processo."},
        {pergunta: "Qual a fun√ß√£o do sistema puxado com Kanban na VixGelados?", opcoes: ["Controlar o recebimento de mat√©ria-prima", "Regular o fluxo entre a embalagem e o armazenamento", "Gerenciar a produ√ß√£o sob encomenda"], resposta: "b", explicacao: "O Kanban √© usado para regular o fluxo de produtos acabados, evitando o ac√∫mulo de estoque entre a embalagem e o armazenamento."},
        {pergunta: "Qual das op√ß√µes abaixo √© uma aplica√ß√£o da dimens√£o cognitiva do Servicescape?", opcoes: ["M√∫sica ambiente", "Piso antiderrapante", "Sinaliza√ß√£o clara e mapa de fluxo"], resposta: "c", explicacao: "A dimens√£o cognitiva do servicescape √© voltada para a informa√ß√£o e orienta√ß√£o do cliente e colaborador, como sinaliza√ß√£o e mapas."},
        {pergunta: "Qual a principal estrat√©gia para mitigar a resist√™ncia dos colaboradores √†s mudan√ßas?", opcoes: ["Aumentar o sal√°rio", "Fazer treinamentos e criar um comit√™ de mudan√ßas", "Reduzir o quadro de funcion√°rios"], resposta: "b", explicacao: "O relat√≥rio sugere que a melhor forma de mitigar a resist√™ncia √© envolver os colaboradores no processo atrav√©s de treinamentos e da cria√ß√£o de um comit√™."},
        {pergunta: "De acordo com os KPIs, qual a meta de redu√ß√£o da dist√¢ncia percorrida e de aumento nas entregas no prazo?", opcoes: ["30% e 95%", "25% e 90%", "30% e 85%"], resposta: "a", explicacao: "As metas de KPIs s√£o a redu√ß√£o de 30% na dist√¢ncia percorrida e o aumento para 95% na taxa de entregas no prazo."},
        {pergunta: "O custo total do projeto de redesenho e o ROI estimado s√£o:", opcoes: ["R$ 20.000 e 3 meses", "R$ 40.000 e 6 meses", "R$ 60.000 e 12 meses"], resposta: "b", explicacao: "O custo total estimado do projeto √© R$ 40.000, com um retorno sobre o investimento (ROI) de aproximadamente 6 meses."}
    ]
};

let perguntas = [];
let indice = 0;
let score = 0;
let gabarito = [];

function startQuiz(nivel) {
    document.getElementById("quiz").style.display = "block";
    document.getElementById("result").style.display = "none";
    document.querySelectorAll("button.btn").forEach(b => {
        if (!b.onclick.toString().includes("startQuiz")) {
            b.style.display = "none";
        }
    });

    if (nivel === "aleatorio") {
        perguntas = [...quizzes.facil, ...quizzes.medio, ...quizzes.avancado, ...quizzes.apresentacao].sort(() => Math.random() - 0.5).slice(0, 10);
    } else {
        perguntas = [...quizzes[nivel]];
    }
    indice = 0;
    score = 0;
    gabarito = [];
    mostrarPergunta();
}

function mostrarPergunta() {
    let q = perguntas[indice];
    document.getElementById("question").innerText = q.pergunta;
    let optionsHTML = "";
    q.opcoes.forEach((op, i) => {
        optionsHTML += `<div class="option" onclick="responder('${String.fromCharCode(97+i)}', this)">${String.fromCharCode(97+i)}) ${op}</div>`;
    });
    document.getElementById("options").innerHTML = optionsHTML;
    document.getElementById("feedback").innerText = "";
    document.getElementById("explanation").innerText = "";
}

function responder(resposta, el) {
    let correta = perguntas[indice].resposta;
    let opcoesDOM = document.querySelectorAll(".option");

    opcoesDOM.forEach(opt => opt.style.pointerEvents = "none");

    if (resposta === correta) {
        el.classList.add("correct");
        document.getElementById("feedback").innerText = "‚úÖ Correto!";
        score++;
    } else {
        el.classList.add("wrong");
        document.getElementById("feedback").innerText = `‚ùå Errado!`;
        opcoesDOM.forEach(opt => {
            if (opt.innerText.startsWith(correta + ")")) {
                opt.classList.add("correct");
            }
        });
    }

    // Exibe a explica√ß√£o
    document.getElementById("explanation").innerText = perguntas[indice].explicacao;

    gabarito.push(correta);

    setTimeout(() => {
        indice++;
        if (indice < perguntas.length) {
            mostrarPergunta();
        } else {
            mostrarResultado();
        }
    }, 4000); // Aumenta o tempo para a explica√ß√£o ser lida
}

function mostrarResultado() {
    document.getElementById("quiz").style.display = "none";
    document.getElementById("result").style.display = "block";
    document.querySelectorAll("button.btn").forEach(b => b.style.display = "inline-block");

    let totalPerguntas = perguntas.length;
    let mensagemFinal = "";

    if (score / totalPerguntas >= 0.8) {
        mensagemFinal = "üèÜ Uau, voc√™ √© um verdadeiro especialista! Seu conhecimento est√° afiado!";
    } else if (score / totalPerguntas >= 0.5) {
        mensagemFinal = "üéâ √ìtimo trabalho! Voc√™ tem uma boa base, mas sempre d√° para aprender mais!";
    } else {
        mensagemFinal = "üôÇ N√£o desanime! O aprendizado √© um processo cont√≠nuo. Tente o quiz novamente!";
    }

    document.getElementById("final-message").innerText = mensagemFinal;
    document.getElementById("score").innerText = `Voc√™ acertou ${score} de ${perguntas.length} perguntas.`;

    let textoGabarito = "";
    perguntas.forEach((p, i) => {
        let letra = gabarito[i];
        let indexResposta = letra.charCodeAt(0) - 97;
        let respostaCerta = p.opcoes[indexResposta];
        textoGabarito += `${i + 1}. ${p.pergunta}\nResposta correta (${letra}): ${respostaCerta}\n${p.explicacao}\n\n`;
    });
    document.getElementById("gabarito").innerText = textoGabarito;
}

function voltarInicio() {
    document.getElementById("result").style.display = "none";
    document.getElementById("quiz").style.display = "none";
    document.getElementById("feedback").innerText = "";
    document.getElementById("explanation").innerText = "";
    document.querySelectorAll("button.btn").forEach(b => {
        if (b.onclick.toString().includes("startQuiz")) {
            b.style.display = "inline-block";
        } else {
            b.style.display = "none";
        }
    });
    indice = 0;
    score = 0;
    gabarito = [];
}

function baixarRelatorio() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const pageWidth = doc.internal.pageSize.getWidth();
    let y = 20;

    doc.setFontSize(22);
    doc.text("Relat√≥rio Quiz VixGelados", pageWidth / 2, y, { align: "center" });
    y += 20;

    doc.setFontSize(16);
    doc.text(`Pontua√ß√£o Final: ${score} de ${perguntas.length}`, pageWidth / 2, y, { align: "center" });
    y += 20;

    doc.setFontSize(12);
    doc.text("Gabarito Completo:", 10, y);
    y += 10;

    perguntas.forEach((p, i) => {
        let letra = gabarito[i];
        let indexResposta = letra.charCodeAt(0) - 97;
        let respostaCerta = p.opcoes[indexResposta];
        let textoPergunta = `Pergunta ${i + 1}: ${p.pergunta}\nResposta correta (${letra}): ${respostaCerta}\nExplica√ß√£o: ${p.explicacao}\n\n`;
        
        const lines = doc.splitTextToSize(textoPergunta, 180);
        if (y + (lines.length * 7) > doc.internal.pageSize.getHeight() - 10) {
            doc.addPage();
            y = 20;
        }
        doc.text(lines, 10, y);
        y += (lines.length * 7) + 5;
    });

    doc.save("relatorio_quiz_vixgelados.pdf");
}
</script>

</body>
</html>